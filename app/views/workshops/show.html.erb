<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top" id="mainNav">
  <div class="container">
    <% if Logo.find_by(active: :true) != nil %>
      <a class="navbar-brand js-scroll-trigger" href="#page-top">
        <%= Logo.find_by(active: :true).name %>
      </a>
    <% end %>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <%= link_to 'Pagina inicial', root_path, class: 'nav-link'%>
        </li>
        <li class="nav-item">
          <%= link_to 'Outras oficinas', workshops_path, class: 'nav-link'%>
        </li>
        <li class="nav-item">
          <%= link_to 'Meu perfil', profile_path, class: 'nav-link'%>
        </li>
        <li class="nav-item">
          <a class="nav-link js-scroll-trigger" href="#about">Resumo</a>
        </li>
        <li class="nav-item">
          <a class="nav-link js-scroll-trigger" href="#comments">Comentários</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<header class="bg-primary text-white">
  <div class="container text-center" id="#top">
    <h1><%= @workshop.title %></h1>
    <p class="lead">Autor: <%= User.find(@workshop.author_id).name %> <%= User.find(@workshop.author_id).surname %></p>
    <p><%= @workshop.updated_at.strftime("Última atualização: %d/%m/%Y às %H:%M") %></p>
  </div>
</header>

<section id="about" style="padding-bottom: 10px;">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 mx-auto">
        <h2>Resumo</h2>
        <p class="lead"><%= simple_format(@workshop.resume) %></p>
      </div>
    </div>
  </div>
</section>
<section id="baixar" style="padding-bottom: 50px;">
  <div class="container">
    <div class="row">
      <div class="col-md-5">
      </div>
      <%= link_to  "Baixar", @workshop.document, download: true, class: 'btn btn-md btn-outline-info' %>
    </div>
  </div>
</section>
  <section class="bg-light">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 mx-auto">
        <h2>Feedback</h2>
        <p class="lead">Responda nossa enquete.</p>
            <ce:enquete id="8603910" question_size="5" option_size="6" font="Roboto, sans-serif" primary_color="#194d33" secondary_color="#ffffff" height="253" ></ce:enquete>
            <script async type="text/javascript" src="https://www.criarenquete.com.br/user.js"></script>
            <ce:enquete id="8604010" question_size="5" option_size="6" font="Roboto, sans-serif" primary_color="#9f0500" secondary_color="#000000" height="278" ></ce:enquete>
            <script async type="text/javascript" src="https://www.criarenquete.com.br/user.js"></script>
        </div>
    </div>
  </div>
</section>
<div class="container" style="margin-top: 5%;">
  <% if Role.find(current_user.role_id).name == 'Supervisor' %>
    <h3 style="text-align: center;">Validação da oficina</h3><br>
    <div class="row">
      <div class="col-md-4">
      </div>
      <div class="col-md-4">
        <% if @workshop.status == 'in_hold' || @workshop.status == 'rejected'%>
          <%= link_to 'Aceitar', supervisorDashboard_accept_workshop_path(id: @workshop.id), class: 'btn btn-md btn-outline-success', method: :put%>
        <% end %>
        <br>
        <% if @workshop.status == 'in_hold' || @workshop.status == 'accepted'%>
          <%= link_to 'Rejeitar', supervisorDashboard_write_feedback_path(id: @workshop.id), class: 'btn btn-md btn-outline-danger'%>
        <% end %>
      </div>
    </div>
  <% end %>
</div>

<!-- comments container -->
		<div class="comment_block" style="overflow-y: scroll; margin-top: 5%; margin-bottom: 10%;" id="comments">

		<!--
			Comments are structured in the following way:

			{ul} defines a new comment (singular)
			{li} defines a new reply to the comment {ul}

			example:

			<ul>
				<comment>

				</comment

					<li>
						<reply>

						</reply>
					</li>

					<li>
						<reply>

						</reply>
					</li>

					<li>
						<reply>

						</reply>
					</li>
			</ul>

		 -->

		 <!-- used by #{user} to create a new comment -->
     <% if user_signed_in? %>
          <%= form_for(@comment, url: comment_index_path) do |f| %>
            <div class="create_new_comment" >
              <!-- current #{user} avatar -->
              <div class="input_comment">
                <%= f.text_field(:commentContent, placeholder: "Comente aqui...") %>
                <%= f.number_field(:workshop_id, hidden: true, value: @workshop.id) %>
                <%= f.number_field(:user_id, hidden: true, value: current_user.id) %>
                <%= f.submit('Comentar', class: 'btn btn-outline-success')%>
              </div>
            </div>
          <% end %>
      <% else %>
          <span><h2>Comentário não disponível, logue no sistema para comentar.</h2></span>
      <%  end %>


		 <!-- new comment -->
    <% @comments.each do |comment| %>
		 <div class="new_comment">

			<!-- build comment -->
		 	<ul class="user_comment">

		 		<!-- current #{user} avatar -->
			 <div class="comment_body">
			 		<p><%= simple_format(comment.commentContent)%></p>
			 	</div>

			 	<!-- comments toolbar -->
			 	<div class="comment_toolbar">

			 		<!-- inc. date and time -->
			 		<div class="comment_details">
			 			<ul>
			 				<li><i class="fa fa-clock-o"></i><%= comment.updated_at.strftime("%H:%M") %></li>
			 				<li><i class="fa fa-calendar"></i><%= comment.updated_at.strftime("%d/%m/%Y")%></li>
              <% if comment.user != nil%>
			 				  <li><i class="fa fa-user"></i><span class="user"><%=comment.user.name%></span></li>
              <% end %>
             </ul>
			 		</div>
          <div class="comment_tools">
			 		</div>

			 	</div>

		 	</ul>

		 </div>
    <% end %>
		</div>
</div>


<!-- Footer -->
<footer class="py-5 bg-dark">
  <div class="container">
    <p class="m-0 text-center text-white">© All rights Reserved. Developed by CJR.</p>
  </div>
  <!-- /.container -->
</footer>

<!-- Bootstrap core JavaScript -->
<script src="vendor/jquery/jquery.min.js"></script>
<script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

<!-- Plugin JavaScript -->
<script src="vendor/jquery-easing/jquery.easing.min.js"></script>

<!-- Custom JavaScript for this theme -->
<script src="js/scrolling-nav.js"></script>
